provider: aws
region: us-west-2
resources:
  ec2_instance:
    name: my-ec2-instance
    instance_type: t2.micro
    ami: ami-0c55b159cbfafe1f0  # Amazon Linux 2 AMI
    key_name: my-key-pair
    security_groups:
      - default
    tags:
      Environment: Development
      Project: MyProject

  s3_bucket:
    name: my-s3-bucket
    acl: private
    tags:
      Environment: Development
      Project: MyProject

  rds_instance:
    name: my-rds-instance
    engine: mysql
    engine_version: 8.0
    instance_class: db.t3.micro
    allocated_storage: 20
    username: admin
    password: mypassword
    tags:
      Environment: Development
      Project: MyProject

  alb:
    name: my-alb
    scheme: internet-facing
    subnets:
      - subnet-0123456789abcdef0
      - subnet-0123456789abcdef1
    security_groups:
      - sg-0123456789abcdef0
    listeners:
      - protocol: HTTP
        port: 80
        default_action:
          type: forward
          target_group: my-target-group
    target_groups:
      - name: my-target-group
        protocol: HTTP
        port: 80
        health_check_path: /health
        health_check_port: 80
        health_check_interval: 30
        health_check_timeout: 5
        healthy_threshold: 3
        unhealthy_threshold: 3
    tags:
      Environment: Development
      Project: MyProject

  autoscaling_group:
    name: my-asg
    min_size: 1
    max_size: 3
    desired_capacity: 2
    launch_template:
      name: my-launch-template
      version: "$Latest"
    vpc_zone_identifier:
      - subnet-0123456789abcdef0
      - subnet-0123456789abcdef1
    target_group_arns:
      - arn:aws:elasticloadbalancing:us-west-2:123456789012:targetgroup/my-target-group/0123456789abcdef
    tags:
      Environment: Development
      Project: MyProject